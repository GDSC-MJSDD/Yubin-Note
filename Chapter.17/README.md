# 17장. 생성자 함수에 의한 객체 생성

## 17.1 Object 생성자 함수

---

new 연산자와 함께 Object 생성자 함수를 호출하면 빈 객체를 생성하여 반환함

빈 객체를 생성한 이후 프로퍼티 또는 메서드를 추가하여 객체 완성 가능

생성자 함수 : new 연산자와 함께 호출하여 객체를 생성하는 함수

인스턴스 : 생성자 함수에 의해 생성된 객체

반드시, Object 생성자 함수를 사용해 빈 객체를 생성해야 하는 건 X

→ 객체를 생성하는 방법 = 객체 리터럴을 사용하는 것이 더 간편

## 17.2 생성자 함수

---

### 17.2.1 객체 리터럴에 의한 객체 생성 방식의 문제점

객체 리터럴에 의한 객체 생성 방식 = 직관적, 간편

BUT) 객체 리터럴에 의한 객체 생성 방식은 단 하나의 객체만 생성함
       → 동일한 프로퍼티를 갖는 객체를 여러개 생성할 경우, 매번 같은 프로퍼티를 기술해야 하기 때                문에 비효율적

객체 = 프로퍼티를 통해 객체 고유의 상태

            메서드를 통해 상태 데이터인 프로퍼티를 참조하고 조작하는 동작 표현

프로퍼티는 객체마다 프로퍼티 값이 다를 수 있지만, 메서드는 내용이 동일한 경우가 일반적

객체 리터럴에 의해 객체를 생성하는 경우 프로퍼티 구조가 동일함에도 불구하고 매번 같은 프로퍼티와 메서드를 기술해야 함

### 17.2.2 생성자 함수에 의한 객체 생성 방식의 장점

생성자 함수에 의한 객체 생성 방식은 마치 객체를 생성하기 위한 템플릿처럼 생성자 함수 사용
→ 프로퍼티 구조가 동일한 객체 여러 개를 간편하게 생성

new 연산자와 함께 호출하면 해당 함수는 생성자 함수로 동작함

IF)  new 연산자와 함께 생성자 함수를 호출하지 않으면 생성자 함수가 아니라 일반 함수로 동작

### 17.2.3 생성자 함수의 인스턴스 생성 과정

생성자 함수의 역할

: 프로퍼티 구조가 동일한 인스턴스를 생성하기 위한 템플릿으로서 동작하여 **인스턴스 생성, 생성된 인스턴스를 초기화**

생성자 함수가 인스턴스를 생성하는 것은 필수
생성된 인스턴스를 초기화하는 것은 옵션

1. **인스턴스 생성과 this 바인딩**
2. **인스턴스 초기화**
3. **인스턴스 반환**

**1. 인스턴스 생성과 this 바인딩**

암묵적으로 빈 객체 생성 → 빈 객체 = 생성자 함수가 생성한 인스턴스 → 인스턴스는 this 바인딩됨

생성자 함수 내부의 this가 생성자 함수가 생성할 인스턴스를 가리킴

**2.인스턴스 초기화**

생성자 함수에 기술되어 있는 코드가 한 줄씩 실행되어 this에 바인딩되어 있는 인스턴스 초기화함

→ this에 바인딩되어 있는 인스턴스에 프로퍼티, 메서드 추가

→ 생성자 함수가 인수로 전달받은 초기값을 인스턴스 프로퍼티에 할당하여 초기화, 고정값 할당

**3.인스턴스 반환**

생성자 함수 내부에서 모든 처리가 끝나면 완성된 인스턴스가 바인딩된 this를 암묵적으로 반환

IF) this가 아닌 다른 객체를 명시적으로 반환하면
    → this가 반환되지 못하고 return문에 명시한 객체가 반환됨
BUT) 명시적으로 원시 값을 반환하면 원시 값 반환은 무시되고 암묵적으로 this 반환됨

⇒ 생성자 함수 내부에서 return문을 반드시 생략해야 함

### 17.2.4 내부 메서드 [[Call]]과 [[Construct]]

생성자 함수로서 호출한다 =  new연산자와 함께 호출하여 객체를 생성하는 것 의미

함수는 객체이므로 일반 객체와 동일하게 동작할 수 있음

함수 = 객체 ≠ 일반 객체

→ 일반 객체는 호출 불가, 함수는 호출 가능

### 17.2.5  constructor와 non-constructor의 구분

- constructor : 함수 선언문, 함수 표현식, 클래스(클래스도 함수다)
- non-constructor : 메서드, 화살표 함수

### 17.2.6 new 연산자

일반 함수와 생성자 함수에 특별한 형식적 차이는 없음

new연산자와 함께 함수를 호출하면 해당 함수는 생성자 함수로 동작함

→ new 연산자와 함께 호출하는 함수는 non-constructor가 아닌 constructor이어야 함

new 연산자 없이 생성자 함수를 호출하면 일반 함수로 호출됨

→ 함수 객체의 내부 메서드 [[Constructor]]가 호출되는 것이 아니라 [[Call]]이 호출됨

### 17.2.7 new.target

new연산자와 함께 생성자 함수로서 호출되면 함수 내부의 new.target은 함수 자신을 가리킴

new연산자 없이 일반 함수로서 호출된 함수 내부의 new.target은 undefined임

대부분의 빌트인 생성자 함수(Object, Stirng, Number, Boolean, Function, Array, Date…)는 
new 연산자와 함께 호출되었는지를 확인한 후 적절한 값을 반환함

BUT) String, Number, Boolean 생성자 함수

**new 연산자와 함께 호출했을 때,** String, Number, Boolean 객체를 생성하여 반환

new 연산자 없이 호출했을 때, 문자열, 숫자, 불리언 값을 반환

→ 이를 통해 데이터 타입을 변환하기도 함
